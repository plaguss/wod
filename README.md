# wod

`wod` is a CLI program to parse CrossFit workouts and generate markdown to be shared in static sites.

It's a personal project to generate a Hugo static site easily. An example can be seen at [mchk.netlify.app](https://mchk.netlify.app/), the repository containing the blog is at [mchk](https://github.com/plaguss/mchk).


## Usage

A programming day can be generated by creating the file file and adding workouts one by one, or from a specific file, let's see how each case works.

### Creating a WOD file

When running the program without any extra argument, it will generate a file in the current path:

```shell
$ wod
Creating file: wod-12-03-2025.md
```

It will contain the base format for a [Hugo](https://gohugo.io/) blog post entry in markdown:

```shell
$ cat wod-12-03-2025.md
---
title: "12-03-2025"
date: 12-03-2025
draft: false
---

Workout for the day, 12-03-2025.
```

By default, the file will be created with the current date, as well as the title and date used to sort the files in the Hugo site. This values can be changed by passing a filename in the following format: `wod-2025-03-20` (without file extension, as that will be created automatically) and `--file-date`. Additionally, Hugo allows multiple languages for the content. This can be informed using the `--languages` optional argument, which if informed, takes a comma separated list of ISO code languages. For example, passing `--languages "en,es"` will generate 2 files (exactly the same) with 2 file extensions: `wod-18-03-25.md` and `wod-18-03-25.es.md`. If only english is wanted, don't use the argument.

### Adding workouts to the file

Once we have a wod file, we can start adding workouts to the file. If no filename is pased, the default one will correspond to the same one we used (assuming no `--languages` was passed).

```shell
wod add "wl 3x(2+1) clean, split jerk @85%"
```

The command appends the workout to the file:

```shell
$ cat wod-12-03-2025.md
---
title: "12-03-2025"
date: 12-03-2025
draft: false
---

Workout for today, 12-03-2025.


---

**Weightlifting**

3x(2+1) Clean, Split Jerk At 85%
```

So if we keep adding workouts, we will have them sorted as blocks. These file can be served as a day of programming using Hugo without anything else.

### Creating from a "wod" file

There's a more direct option by passing a file with all the workouts for a given day. By passing the `--wodfile` argument pointing to a file with all the workouts separated by lines, we can do everything in a single step, generating the WOD in a single step:

```shell
wod --wodfile "sample_files/wod_test.wod"
```

This command would generate a file like [this](./sample_files/wod-12-03-2025.md).

For example, the following command contains an example of all the arguments:

```shell
wod \
    "/sample_files/wod-18-02-2025" \
    --wodfile "/sample_files/wod_test.wod" \
    --file-date "2025-03-19" \
    --languages "en,es"
```

It will create 2 files named `wod-18-02-2025.md` and `wod-18-02-2025.es.md` (due to the `languages`), with the date "2025-03-19".

## How to represent WODs

A simplified "language" is defined for the wods to be parsed. Some example can be seen at [tests](./src/tests.rs), while a proper definition is done.

A full example is presented here:

```text
ft 21 pull up, 42 du, 21 thruster @43kg, 18 chest to bar, 36 du, 18 thruster @51kg, 15 bar mu, 30 du, 15 thruster @61kg
```

Also *Comments* and/or *Name* can be added for a given workout. They must be separated with a "|" character (if only the name is wanted, just write "wod||name"):

```text
ft 21 pull up, 42 du, 21 thruster @43kg, 18 chest to bar, 36 du, 18 thruster @51kg, 15 bar mu, 30 du, 15 thruster @61kg|Time Cap 20'|Open 25.3
```

## Installation

Download the package and install from source:

```shell
git clone https://github.com/plaguss/wod
cd wod
cargo install --path .
```

After that you should have the program available:

```shell
$ wod help
Usage: wod [OPTIONS] [FILENAME] [COMMAND]

Commands:
  add   Command to add a new workout to a file
  list  Command to list the movements along with an explanatory video
  help  Print this message or the help of the given subcommand(s)

Arguments:
  [FILENAME]
          Optional name to work with

          [default: wod-2025-03-20]

Options:
  -w, --wodfile <WODFILE>
          A path pointing to a file with a list of workouts to add. Each line in the file should be a workout as you would pass to `wod add <workout>`

      --file-date <FILE_DATE>
          A date that will be used in the metadata of the generated file. It must be in format: "YYYY-MM-DD"

          [default: 2025-03-20]

  -l, --languages <LANGUAGES>
          Languages for the files, as expected by Hugo. It must be a comma separated list of [ISO code](https://en.wikipedia.org/wiki/List_of_ISO_639_language_codes). By default is not informed, and no language extension will be added to the file.

          If this value is informed, the default file will be written, and one more per language. So "en,it" will generate 3 files.

  -f, --force
          Whether to force overwriting an existing file, defaults to false

  -h, --help
          Print help (see a summary with '-h')

  -V, --version
          Print version

```

## Development

Run all tests with the changes:

```shell
make test-all
```

And run the linting:

```shell
make lint
```

Read the docs with:

```shell
cargo doc --open
```
